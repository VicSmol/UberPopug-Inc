# Task service

## Почему???

- Изолировать записть и чтение задач от других сервисов
- Изолировать менеджмент задач от остальный процессов

## Компоненты

- Реплицированная база данных (для обеспечения отказоустойчисвости данного сервиса)
- REST API
- Kafka продюсер для добавления эвентов в Kafka
- Kafka консюмер для обработки эвентов из Kafka

## Данные

Данный сервис содержит информацию об задачах:
- creator (id аккаунта)
- assignedTo (id аккаунта)
- status (in_progress, completed)

## Синхронные операции (Rest API)

- получение задач для конкретного пользователя
- создание задачи
- создание эвента по клику на кнопку для переасайнивания задач

## Асинхронные операции

- перемешиваение ассайнтов по эвенту

## Workflows

- Пользователь шлет синхронный запрос на получения заасайненых на него тасок
- Пользователь шлет синхронный запрос на создание таски -> сохраняем таску в БД -> сервис триггерит task created event
- Пользователь шлет синхронный запрос на перемешивание ассайнтов -> сервис треггерит Reassign button click event
- Пользователь поддтверждает выполненность задачи -> сохраняем изменения в БД -> сервис триггерит task completed event
- На евент по перемешиванию задач -> забираем всех пользователей (кроме менеджеров и админов) из account сервиса с помощью асинхронного запроса -> перемешиваем карточки -> кладем изменнения в базу